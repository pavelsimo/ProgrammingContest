<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td>Magical Girls are girls who have magical powers. They fight against evil witches.
<br></br>
<br></br>
<br></br>
You are going to become a Magical Girl. You will start with <b>M</b> Life Points. <b>M</b> is also the maximal number of Life Points you may have. (I.e., if you gain some Life Points and your new total should exceed <b>M</b>, it will just become equal to <b>M</b>.) As soon as your Life Points drop to 0, you die.
<br></br>
<br></br>
<br></br>
Starting from day 1, at the beginning of each day you will lose one Life Point. The only way to gain Life Points is by defeating the evil witches. There are N witches, conveniently numbered 0 through N-1. Each of the witches will only appear once, for one day of your life. If you decide not to fight her, nothing will happen. If you decide to fight her, there are two possible outcomes: If you win, you will gain some Life Points and the witch disappears. If you lose, she will decrease your Life Points to zero and you die immediately. If multiple witches appear on the same day, you have to fight them one at a time: You pick the first witch to fight. If you defeat her, you gain the corresponding Life Points. Then you pick the second witch to fight, and so on, until you either defeat all the available witches or decide that you do not wish to fight any of the remaining ones.
<br></br>
<br></br>
<br></br>
You are given 
the int <b>M</b>, 
a vector &lt;int&gt; <b>day</b>,
a vector &lt;int&gt; <b>win</b>, and
a vector &lt;int&gt; <b>gain</b>.
Here, <b>day</b>[i] is the day on which the i-th witch appears, <b>win</b>[i] is the probability (as a percentage) that you will defeat the witch if you fight her, and <b>gain</b>[i] is the amount of Life Points you would gain for defeating the witch. Your goal is to maximize the expected day on which you die. Compute and return this expected value.
</td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>MagicalGirl</td></tr><tr><td>Method:</td><td>maxExpectation</td></tr><tr><td>Parameters:</td><td>int, vector &lt;int&gt;, vector &lt;int&gt;, vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>double</td></tr><tr><td>Method signature:</td><td>double maxExpectation(int M, vector &lt;int&gt; day, vector &lt;int&gt; win, vector &lt;int&gt; gain)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td>&#160;&#160;&#160;&#160;</td></tr><tr><td></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>On each day, you first lose one Life Point, and only then are you allowed to fight the witches who appear on that day.</td></tr><tr><td align="center" valign="top">-</td><td>The returned value must be accurate to within a relative or absolute error of 1e-9.</td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td>N will be between 1 and 50, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>M</b> will be between 2 and 100,000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>day</b>, <b>win</b> and <b>gain</b> will each contain exactly N elements.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>day</b> will be between 1 and 5,000,000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>win</b> will be between 0 and 100, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>gain</b> will be between 1 and <b>M</b>, inclusive.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>2</pre></td></tr><tr><td><pre>{1}</pre></td></tr><tr><td><pre>{75}</pre></td></tr><tr><td><pre>{1}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 2.5</pre></td></tr><tr><td><table><tr><td colspan="2">Your life would look as follows: You start with 2 Life Points. Day 1 starts, you lose 1 Life Point and you have 1 Life Point left. Then a witch appears. You have a 75% probability of defeating her.
<br></br>
If you decide NOT to fight her, you will die on day 2. Here is what would happen if you DO fight her:
<ul>
<li>With probability 0.75, you will win and gain one more Life Point. You would then die on day 3.</li>
<li>With probability 0.25, you will die immediately, i.e., on day 1.</li>
</ul>
So if you decide to fight the witch, the expected day of your death is 0.75*3 + 0.25*1 = 2.5.
It is therefore a better strategy to fight the witch, and 2.5 is the correct answer.
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>10</pre></td></tr><tr><td><pre>{5,5,5,5}</pre></td></tr><tr><td><pre>{100,100,100,100}</pre></td></tr><tr><td><pre>{1,1,1,1}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 14.0</pre></td></tr><tr><td><table><tr><td colspan="2">You should fight all the witches since you can always win.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>10</pre></td></tr><tr><td><pre>{5,5,5,5,5}</pre></td></tr><tr><td><pre>{40,80,60,20,0}</pre></td></tr><tr><td><pre>{10,10,10,10,10}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 13.0</pre></td></tr><tr><td><table><tr><td colspan="2">It is sufficient to fight a single witch, because the win would already restore your Life Points to <b>M</b>. The best option is to fight the one you are most likely to defeat. Note that fighting her gives you a better expectation than you get from not fighting any witches.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>2</pre></td></tr><tr><td><pre>{2}</pre></td></tr><tr><td><pre>{100}</pre></td></tr><tr><td><pre>{2}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 2.0</pre></td></tr><tr><td><table><tr><td colspan="2">On each day, you first lose one Life Point, and only then are you allowed to fight the witches who appear on that day.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>20</pre></td></tr><tr><td><pre>{2,13,8,7,9,4,6,21}</pre></td></tr><tr><td><pre>{18,83,75,23,45,23,10,98}</pre></td></tr><tr><td><pre>{10,9,8,10,7,16,13,20}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 35.908</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">5)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>11</pre></td></tr><tr><td><pre>{10,20,30,40,50,60,70,80,90}</pre></td></tr><tr><td><pre>{100,100,100,100,100,100,100,100,100}</pre></td></tr><tr><td><pre>{10,10,10,10,10,10,10,10,10}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 101.0</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">6)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>100000</pre></td></tr><tr><td><pre>{1000000}</pre></td></tr><tr><td><pre>{100}</pre></td></tr><tr><td><pre>{100000}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 100000.0</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
